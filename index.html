<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø£Ø¯Ø§Ø© ÙÙƒ ØªØ´ÙÙŠØ± QR Code</title>
    <meta name="description" content="Ù…ÙˆÙ‚Ø¹ Ù…Ø¬Ø§Ù†ÙŠ Ù„ÙÙƒ ØªØ´ÙÙŠØ± ÙˆÙ‚Ø±Ø§Ø¡Ø© Ø±Ù…ÙˆØ² QR Ø¨Ù…Ø§ ÙÙŠÙ‡Ø§ Ø±Ù…ÙˆØ² Wi-Fi">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Ù…ÙƒØªØ¨Ø© QR -->
    <script src="https://unpkg.com/html5-qrcode"></script>
    <link rel="stylesheet" href="style.css">
<style>
body {
    font-family: Tahoma, Arial;
    background: #f4f6f8;
    text-align: center;
    margin: 0;
    padding: 20px;
}

h1 {
    color: #333;
}

.container {
    max-width: 500px;
    margin: auto;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
}

#reader {
    width: 100%;
    margin-bottom: 15px;
}

.result {
    background: #f1f1f1;
    padding: 10px;
    border-radius: 6px;
    margin-top: 10px;
}

pre {
    text-align: left;
    direction: ltr;
    white-space: pre-wrap;
}

  
</style>
</head>
<body>

<h1>ğŸ” Ø£Ø¯Ø§Ø© ÙÙƒ ØªØ´ÙÙŠØ± QR Code</h1>

<div class="container">

    <div id="reader"></div>

    <input type="file" id="qr-file" accept="image/*">

    <div class="result">
        <h3>Ø§Ù„Ù†ØªÙŠØ¬Ø©:</h3>
        <pre id="output">â€”</pre>
    </div>

</div>

<script src="script.js"></script>
<script>
  const output = document.getElementById("output");

/* Ù‚Ø±Ø§Ø¡Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ */
const qr = new Html5Qrcode("reader");

qr.start(
    { facingMode: "environment" },
    { fps: 10, qrbox: 250 },
    (text) => {
        displayResult(text);
        qr.stop();
    }
);

/* Ù‚Ø±Ø§Ø¡Ø© Ù…Ù† ØµÙˆØ±Ø© */
document.getElementById("qr-file").addEventListener("change", e => {
    const file = e.target.files[0];
    if (!file) return;

    const qrFile = new Html5Qrcode("reader");
    qrFile.scanFile(file, true)
        .then(text => displayResult(text))
        .catch(err => output.textContent = "Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù…Ø²");
});

/* ØªØ­Ù„ÙŠÙ„ QR */
function displayResult(text) {
    if (text.startsWith("WIFI:")) {
        const data = {};
        text.replace("WIFI:", "")
            .split(";")
            .forEach(item => {
                const [k, v] = item.split(":");
                data[k] = v;
            });

        output.textContent =
`ğŸ“¶ Wi-Fi QR Code
Ø§Ø³Ù… Ø§Ù„Ø´Ø¨ÙƒØ©: ${data.S}
Ø§Ù„Ø­Ù…Ø§ÙŠØ©: ${data.T}
ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${data.P}`;
    } else {
        output.textContent = text;
    }
}
</script>
</body>
</html>
